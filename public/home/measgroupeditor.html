<h2>Measurement Groups</h2>
<h4 class="info-mode">{{ editmode | uppercase}} </h4>
<hr>
	<p [ngSwitch]="editmode">
    <template ngSwitchCase="list">
	<div class="row-fluid">
						<h4>{{ errorhandler }} </h4>
      		<div  class="col-md-9">
			<input type="text"  class="form-control" [(ngModel)]="filter" >
      <button type="submit" (click)="onFilter()" class="btn btn-primary">Filter</button>
	 		<button type="button" (click)="newMeasGroup()" class="btn btn-primary">New</button>
     		</div>
				<div  class="col-md-9">

	<accordion [closeOthers]="oneAtATime">
  		<accordion-group #group  *ngFor="let measgroup of measgroups" [heading]="measgroup.ID">
   			<div accordion-heading>
    				<i style="top: -15px" class="pull-right glyphicon"
         			[ngClass]="{'glyphicon-chevron-down': group?.isOpen, 'glyphicon-chevron-right': !group?.isOpen}"></i>
   			</div>
		<!--content-->
					<i class="pull-right glyphicon glyphicon glyphicon-eye-open" (click)="viewItem(group,$event)"></i>
					<i class="pull-right glyphicon glyphicon glyphicon glyphicon-edit"  (click)="editMeasGroup(measgroup.ID)"></i>
    			<i class="pull-right glyphicon glyphicon glyphicon glyphicon-remove"  (click)="removeItem(measgroup.ID)"></i>

    		 Measurements:<br> {{ measgroup.Measurements }}
				 <hr>
				 {{ measgroup | json }}

  		</accordion-group>
	</accordion>
</div>
</div>
     </template>
     <template ngSwitchCase="create">
   	<form [formGroup]="measgroupForm" class="form-horizontal" (ngSubmit)="saveMeasGroup()">
				<div class="form-group">
  	<label class="control-label col-sm-2" for="id">id</label>
			<i tooltipPlacement="top" style="float: left" class="info control-label glyphicon glyphicon-info-sign" tooltipAnimation="true"
				tooltip="Unique identifier of Measurement Group"></i>
			 <div class="col-sm-9">
		 <input formControlName="id" id="id" />
		 <control-messages [control]="measgroupForm.controls.id"></control-messages>
	 	 </div>
		 	</div>

    <div>
				<div class="form-group">
  	<label class="control-label col-sm-2" for="Measurements">Measurements</label>
			<i tooltipPlacement="top" style="float: left" class="info control-label glyphicon glyphicon-info-sign" tooltipAnimation="true"
				tooltip="List of measurements ready to be attached on {{measgroupForm.controls.id.value}}"></i>
			 <div class="col-sm-9">
      <ss-multiselect-dropdown [options]="selectmeas" [texts]="myTexts" [settings]="mySettings" [ngModel] [ngModelOptions]="{standalone: true}" (ngModelChange)="onChange($event)"></ss-multiselect-dropdown>
			<control-messages [control]="measgroupForm.controls.Measurements"></control-messages>
			 </div>
				</div>
  </div>
			<!--select formControlName="Measurements" id="Measurements">
				<option *ngFor="let measurement of influxmeas"
						[value]="measurement.ID"> {{measurement.ID}}
				</option>
		</select>
    <control-messages [control]="measgroupForm.controls.Measurements"></control-messages-->
		<div class="col-sm-offset-4 col-sm-6">
			<button type="submit" [disabled]="!measgroupForm.valid">Submit</button>
			<button type="reset" [disabled]="!measgroupForm.dirty">Reset</button>
			<button type="button" class="ui button" (click)="cancelEdit()">Cancel</button>
		</div>
  	</form>

     </template>

		 <template ngSwitchCase="modify">
		<form [formGroup]="measgroupForm" class="form-horizontal" (ngSubmit)="updateMeasGroup(testmeasgroups.ID)">
					<div class="form-group">
  		<label class="control-label col-sm-2" for="id">id</label>
				<i tooltipPlacement="top" style="float: left" class="info control-label glyphicon glyphicon-info-sign" tooltipAnimation="true"
				tooltip="Connection port to the Device by SNMP protocol"></i>
			 <div class="col-sm-9">
			 <input formControlName="id" id="id" [ngModel] = "testmeasgroups.ID"/>
			 <control-messages [control]="measgroupForm.controls.id"></control-messages>
		  </div>
		 	</div>


			<div class="form-group">
  	<label class="control-label col-sm-2" for="Measurements">Measurements</label>
				<i tooltipPlacement="top" style="float: left" class="info control-label glyphicon glyphicon-info-sign" tooltipAnimation="true"
				tooltip="Connection port to the Device by SNMP protocol"></i>
			 <div class="col-sm-9">
					<ss-multiselect-dropdown [texts]="myTexts" [settings]="mySettings" [options]="selectmeas" [ngModel]="testmeasgroups.Measurements" [ngModelOptions]="{standalone: true}" (ngModelChange)="onChange($event)"></ss-multiselect-dropdown>
					<control-messages [control]="measgroupForm.controls.Measurements"></control-messages>
				</div>
			</div>
				<!--select formControlName="Measurements" id="Measurements" [ngModel]= "testmeasgroups.Measurements">
					<option *ngFor="let measurement of influxmeas"
							[value]="measurement.ID"> {{measurement.ID}}
					</option>
			</select-->
			<div class="col-sm-offset-4 col-sm-6">
		<button type="submit" [disabled]="!measgroupForm.valid">Submit</button>
		<button type="reset" [disabled]="!measgroupForm.dirty">Reset</button>
		<button type="button" class="ui button" (click)="cancelEdit()">Cancel</button>
		</div>
			</form>
		 </template>

</p>
